{"ast":null,"code":"import { FETCH_EMPLOYEE_REQUEST, FETCH_EMPLOYEE_SUCCESS, FETCH_EMPLOYEE_ERROR, CHANGE_EMPLOYEE, ASSIGN_EMPLOYEE_SURVEY, REMOVE_EMPLOYEE_SURVEY } from './employeeTypes';\nconst initialState = {\n  loading: false,\n  employee: [],\n  empSur: [],\n  empAss: [],\n  value: -1,\n  err: ''\n};\n\nconst empReducer = (state = initialState, action) => {\n  let newSurvey = \"\";\n  let newAss;\n  let indx = 0;\n  let newSurList;\n  let newEmpAss;\n  let sid;\n\n  switch (action.type) {\n    case FETCH_EMPLOYEE_REQUEST:\n      console.log(\"reducer 1\");\n      return { ...state,\n        loading: true\n      };\n\n    case FETCH_EMPLOYEE_SUCCESS:\n      console.log(\"reducer 2\");\n      return { ...state,\n        employee: action.payload,\n        loading: true\n      };\n\n    case FETCH_EMPLOYEE_ERROR:\n      console.log(\"reducer 3\");\n      return { ...state,\n        loading: false,\n        err: action.payload\n      };\n\n    case CHANGE_EMPLOYEE:\n      if (action.payload.indx == -1) {\n        return { ...state,\n          empSur: [],\n          empAss: [],\n          value: action.payload.indx\n        };\n      }\n\n      const employee = state.employee[action.payload.indx];\n      console.log(action.payload);\n      let sur = [...action.payload.surveys];\n      let surcopy = [];\n      let assSur = [];\n      let empAss = [];\n\n      for (let i in employee.assSur) {\n        empAss.push(employee.assSur[i]);\n      }\n\n      for (let i in sur) {\n        if (empAss.includes(sur[i].sid)) {\n          assSur.push(sur[i]);\n        }\n      }\n\n      for (let i in sur) {\n        if (!empAss.includes(sur[i].sid)) {\n          surcopy.push(sur[i]);\n        }\n      }\n\n      return { ...state,\n        empSur: surcopy,\n        empAss: assSur,\n        value: action.payload.indx\n      };\n\n    case ASSIGN_EMPLOYEE_SURVEY:\n      sid = action.payload;\n\n      while (indx < state.empSur.length) {\n        if (state.empSur[indx].sid === sid) {\n          console.log(indx);\n          newSurvey = state.empSur[indx];\n        }\n\n        indx += 1;\n      }\n\n      newAss = [...state.empAss, newSurvey];\n      newSurList = state.empSur.filter(survey => {\n        return survey.sid !== sid;\n      });\n      newEmpAss = [...state.employee[state.value].assSur, sid];\n      let newEmployees = [...state.employee];\n      newEmployees[state.value].assSur = newEmpAss;\n      return { ...state,\n        employee: newEmployees,\n        empSur: newSurList,\n        empAss: newAss\n      };\n\n    case REMOVE_EMPLOYEE_SURVEY:\n      sid = action.payload;\n\n      for (indx in this.props.empAss) {\n        if (this.props.empAss[indx].sid === sid) {\n          newSurvey = this.props.empAss[indx];\n        }\n      }\n\n      newSurList = [...state.empSur, newSurvey];\n      newAss = state.empAss.filter(survey => {\n        return survey.sid !== sid;\n      });\n      this.setState({\n        surveys: newSurList,\n        assignedSurveys: newAss\n      });\n      newEmpAss = state.employee[state.value].assSur.filter(assSid => {\n        return assSid !== sid;\n      });\n      let newEmployee = {};\n      newEmployee = Object.assign(newEmployee, this.props.employees[this.props.value]);\n      newEmployee.assSur = newEm;\n      this.setState({\n        employee: newEmployee\n      });\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nexport default empReducer;","map":{"version":3,"sources":["/Users/himank/Desktop/PROJECTS/react_node_test/react_node_test2/job_test/src/redux/employee/employeeReducer.js"],"names":["FETCH_EMPLOYEE_REQUEST","FETCH_EMPLOYEE_SUCCESS","FETCH_EMPLOYEE_ERROR","CHANGE_EMPLOYEE","ASSIGN_EMPLOYEE_SURVEY","REMOVE_EMPLOYEE_SURVEY","initialState","loading","employee","empSur","empAss","value","err","empReducer","state","action","newSurvey","newAss","indx","newSurList","newEmpAss","sid","type","console","log","payload","sur","surveys","surcopy","assSur","i","push","includes","length","filter","survey","newEmployees","props","setState","assignedSurveys","assSid","newEmployee","Object","assign","employees","newEm"],"mappings":"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","sourcesContent":["import {FETCH_EMPLOYEE_REQUEST,\n        FETCH_EMPLOYEE_SUCCESS,\n        FETCH_EMPLOYEE_ERROR,\n        CHANGE_EMPLOYEE,\n        ASSIGN_EMPLOYEE_SURVEY,\n        REMOVE_EMPLOYEE_SURVEY} \nfrom './employeeTypes';\n\nconst initialState = {\n    loading: false,\n    employee:[],\n    empSur:[],\n    empAss:[],\n    value: -1,\n    err:''\n}\n\nconst empReducer = (state = initialState, action) =>{\n\n    let newSurvey = \"\"\n    let newAss;\n    let indx = 0\n    let newSurList;\n    let newEmpAss;\n    let  sid;\n    switch(action.type){\n        case FETCH_EMPLOYEE_REQUEST:\n            console.log(\"reducer 1\")\n            return {\n                ...state,\n                loading: true\n            }\n            \n        case FETCH_EMPLOYEE_SUCCESS:\n            console.log(\"reducer 2\")\n            return {\n                ...state,\n                employee: action.payload,\n                loading: true\n            }\n        case FETCH_EMPLOYEE_ERROR:\n            console.log(\"reducer 3\")\n            return {\n                ...state,\n                loading: false,\n                err: action.payload\n            }\n        case CHANGE_EMPLOYEE:\n\n            if(action.payload.indx == -1){\n                return{ \n                    ...state,\n                    empSur:[],\n                    empAss:[],\n                    value: action.payload.indx\n                }\n            }\n            const employee = state.employee[action.payload.indx]\n            console.log(action.payload)\n            let sur = [...action.payload.surveys]\n            let surcopy = []\n            let assSur=[]\n            let empAss = [] \n\n            for (let i in employee.assSur){\n                empAss.push(employee.assSur[i])\n            }\n\n            for (let i in sur){\n                if (empAss.includes(sur[i].sid)){\n                    assSur.push(sur[i])\n                }\n            }\n\n            for (let i in sur){\n                if (!empAss.includes(sur[i].sid)){\n                    surcopy.push(sur[i])\n                }\n            }\n\n            return { \n                ...state,\n                empSur:surcopy,\n                empAss:assSur,\n                value: action.payload.indx\n            }\n        case ASSIGN_EMPLOYEE_SURVEY:\n            sid  = action.payload\n            while (indx < state.empSur.length){\n                if (state.empSur[indx].sid === sid){\n                    console.log(indx)\n                    newSurvey = state.empSur[indx]\n                }\n                indx+=1\n            }\n            newAss = [...state.empAss, newSurvey]\n            newSurList = state.empSur.filter(survey => {\n                return survey.sid!==sid\n            })\n\n            newEmpAss = [...state.employee[state.value].assSur, sid]\n            let newEmployees = [...state.employee]\n            newEmployees[state.value].assSur = newEmpAss\n\n            return{\n\n                ...state,\n                employee: newEmployees,\n                empSur: newSurList,\n                empAss: newAss\n                \n            }\n        case REMOVE_EMPLOYEE_SURVEY:\n            sid = action.payload\n            for (indx in this.props.empAss){\n                if (this.props.empAss[indx].sid === sid){\n                    newSurvey = this.props.empAss[indx]\n                }\n            }\n            newSurList = [...state.empSur, newSurvey]\n            newAss = state.empAss.filter(survey=>{\n            return survey.sid!==sid\n            })\n\n            this.setState({\n                surveys: newSurList,\n                assignedSurveys: newAss})\n\n            newEmpAss = state.employee[state.value].assSur.filter(assSid=>{\n                return assSid !== sid;\n            })\n            let newEmployee = {}\n            newEmployee = Object.assign(newEmployee, this.props.employees[this.props.value])\n            newEmployee.assSur = newEm\n            this.setState({\n                employee: newEmployee\n            })\n            \n            return state\n\n        default: \n            return state\n    }\n}\n\nexport default empReducer;"]},"metadata":{},"sourceType":"module"}